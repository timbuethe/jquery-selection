(function(a){function e(){}function f(b){var d=a(b).closest(".selection"),e=d.find(c.filter);return e.index(b)}function g(d,e,f,g){var h=e<f?e:f,i=f>e?f:e;b=[];d.each(function(){var d=c.value(this),e=c.group(this),f=d>=h&&d<=i&&(!g||g===e),j=a(this);if(!j.hasClass("selection-selected")&&f){c.select(this)}if(j.hasClass("selection-selected")&&!f){c.unselect(this)}j.toggleClass("selection-selected",f).toggleClass("selection-first",d===h).toggleClass("selection-last",d===i);if(f)b.push(this)})}var b=[],c,d;d={selectedValues:function(){var d=[];a(b).each(function(){d.push(c.value(this))});return d},isSelecting:function(){return this.data("selection-selecting")===true},clear:function(){return this.each(function(){var b=a(this),d=b.find(c.filter);g(d)})},init:function(h){c=a.extend({filter:"*",start:e,stop:e,select:e,unselect:e,value:f,group:e},h);return this.each(function(){var e=a(this),f=e.find(c.filter),h,i;e.addClass("selection");f.addClass("selection-selectable");e.on("mouseenter",c.filter,function(){if(e.data("selection-selecting")===true){g(f,h,c.value(this),i)}a(this).addClass("selection-over")});e.on("mouseleave",c.filter,function(){a(this).removeClass("selection-over")});e.on("mousedown",c.filter,function(){c.start(this);e.data("selection-selecting",true);h=c.value(this);i=c.group(this)});a(document).on("mouseup",function(){if(e.data("selection-selecting")===true){try{c.stop(this,{elements:b,values:d.selectedValues()})}finally{e.data("selection-selecting",false)}}})})}};a.fn.selection=function(b){if(d[b]){return d[b].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof b==="object"||!b){return d.init.apply(this,arguments)}else{a.error("Method "+b+" does not exist on jQuery.selection")}}})(jQuery)